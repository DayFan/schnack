!function(){"use strict";function n(){}function t(t,r){var e=new n;if(t instanceof n)t.each(function(n,t){e.set(t,n)});else if(Array.isArray(t)){var o,u=-1,c=t.length;if(null==r)for(;++u<c;)e.set(u,t[u]);else for(;++u<c;)e.set(r(o=t[u],u,t),o)}else if(t)for(var i in t)e.set(i,t[i]);return e}function r(){for(var n,t=arguments,r=0,o=arguments.length,u={};r<o;++r){if(!(n=t[r]+"")||n in u)throw new Error("illegal type: "+n);u[n]=[]}return new e(u)}function e(n){this._=n}function o(n,t){return n.trim().split(/^|\s+/).map(function(n){var r="",e=n.indexOf(".");if(e>=0&&(r=n.slice(e+1),n=n.slice(0,e)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}function u(n,t){for(var r,e=0,o=n.length;e<o;++e)if((r=n[e]).name===t)return r.value}function c(n,t,r){for(var e=0,o=n.length;e<o;++e)if(n[e].name===t){n[e]=I,n=n.slice(0,e).concat(n.slice(e+1));break}return null!=r&&n.push({name:t,value:r}),n}function i(n){return function(t,r){n(null==t?r:null)}}function a(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function l(n){return new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}")}function f(n,t){var r=l(n);return function(e,o){return t(r(e),o,n)}}function s(n){var t=Object.create(null),r=[];return n.forEach(function(n){for(var e in n)e in t||r.push(t[e]=e)}),r}function p(n){if("string"==typeof n)return n;if(v(n))return bn?bn.call(n):"";var t=n+"";return"0"==t&&1/n==-on?"-0":t}function h(n){return!!n&&"object"==typeof n}function v(n){return"symbol"==typeof n||h(n)&&dn.call(n)==un}function y(n){return null==n?"":p(n)}function d(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function m(n,t){for(var r=-1,e=n?n.length:0,o=Array(e);++r<e;)o[r]=t(n[r],r,n);return o}function g(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function b(n,t){return m(t,function(t){return n[t]})}function j(n){return"\\"+Fn[n]}function w(n,t){var r=Kn(n)||L(n)?g(n.length,String):[],e=r.length,o=!!e;for(var u in n)!t&&!Jn.call(n,u)||o&&("length"==u||$(u,e))||r.push(u);return r}function _(n,t,r,e){return void 0===n||q(n,Xn[r])&&!Jn.call(e,r)?t:n}function k(n,t,r){var e=n[t];Jn.call(n,t)&&q(e,r)&&(void 0!==r||t in n)||(n[t]=r)}function O(n){if(!C(n))return Gn(n);var t=[];for(var r in Object(n))Jn.call(n,r)&&"constructor"!=r&&t.push(r);return t}function A(n){if(!J(n))return R(n);var t=C(n),r=[];for(var e in n)("constructor"!=e||!t&&Jn.call(n,e))&&r.push(e);return r}function S(n,t){return t=zn(void 0===t?n.length-1:t,0),function(){for(var r=arguments,e=-1,o=zn(r.length-t,0),u=Array(o);++e<o;)u[e]=r[t+e];e=-1;for(var c=Array(t+1);++e<t;)c[e]=r[e];return c[t]=u,d(n,this,c)}}function E(n){if("string"==typeof n)return n;if(U(n))return Bn?Bn.call(n):"";var t=n+"";return"0"==t&&1/n==-wn?"-0":t}function T(n,t,r,e){r||(r={});for(var o=-1,u=t.length;++o<u;){var c=t[o],i=e?e(r[c],n[c],c,r,n):void 0;k(r,c,void 0===i?n[c]:i)}return r}function $(n,t){return!!(t=null==t?_n:t)&&("number"==typeof n||Rn.test(n))&&n>-1&&n%1==0&&n<t}function x(n,t,r){if(!J(r))return!1;var e=typeof t;return!!("number"==e?F(r)&&$(t,r.length):"string"==e&&t in r)&&q(r[t],n)}function C(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||Xn)}function R(n){var t=[];if(null!=n)for(var r in Object(n))t.push(r);return t}function q(n,t){return n===t||n!==n&&t!==t}function L(n){return M(n)&&Jn.call(n,"callee")&&(!Dn.call(n,"callee")||Nn.call(n)==kn)}function F(n){return null!=n&&X(n.length)&&!P(n)}function M(n){return N(n)&&F(n)}function H(n){return!!N(n)&&(Nn.call(n)==On||"string"==typeof n.message&&"string"==typeof n.name)}function P(n){var t=J(n)?Nn.call(n):"";return t==An||t==Sn}function X(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=_n}function J(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function N(n){return!!n&&"object"==typeof n}function U(n){return"symbol"==typeof n||N(n)&&Nn.call(n)==En}function D(n){return null==n?"":E(n)}function G(n){return F(n)?w(n):O(n)}function z(n){return F(n)?w(n,!0):A(n)}n.prototype=t.prototype={constructor:n,has:function(n){return"$"+n in this},get:function(n){return this["$"+n]},set:function(n,t){return this["$"+n]=t,this},remove:function(n){var t="$"+n;return t in this&&delete this[t]},clear:function(){var n=this;for(var t in n)"$"===t[0]&&delete n[t]},keys:function(){var n=this,t=[];for(var r in n)"$"===r[0]&&t.push(r.slice(1));return t},values:function(){var n=this,t=[];for(var r in n)"$"===r[0]&&t.push(n[r]);return t},entries:function(){var n=this,t=[];for(var r in n)"$"===r[0]&&t.push({key:r.slice(1),value:n[r]});return t},size:function(){var n=this,t=0;for(var r in n)"$"===r[0]&&++t;return t},empty:function(){var n=this;for(var t in n)if("$"===t[0])return!1;return!0},each:function(n){var t=this;for(var r in t)"$"===r[0]&&n(t[r],r.slice(1),t)}};var I={value:function(){}};e.prototype=r.prototype={constructor:e,on:function(n,t){var r,e=this._,i=o(n+"",e),a=-1,l=i.length;{if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<l;)if(r=(n=i[a]).type)e[r]=c(e[r],n.name,t);else if(null==t)for(r in e)e[r]=c(e[r],n.name,null);return this}for(;++a<l;)if((r=(n=i[a]).type)&&(r=u(e[r],n.name)))return r}},copy:function(){var n={},t=this._;for(var r in t)n[r]=t[r].slice();return new e(n)},call:function(n,t){var r=arguments;if((e=arguments.length-2)>0)for(var e,o,u=new Array(e),c=0;c<e;++c)u[c]=r[c+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(c=0,e=(o=this._[n]).length;c<e;++c)o[c].value.apply(t,u)},apply:function(n,t,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var e=this._[n],o=0,u=e.length;o<u;++o)e[o].value.apply(t,r)}};var B=function(n,e){function o(n){var t,r=h.status;if(!r&&a(h)||r>=200&&r<300||304===r){if(l)try{t=l.call(u,h)}catch(n){return void s.call("error",u,n)}else t=h;s.call("load",u,t)}else s.call("error",u,n)}var u,c,l,f,s=r("beforesend","progress","load","error"),p=t(),h=new XMLHttpRequest,v=null,y=null,d=0;if("undefined"==typeof XDomainRequest||"withCredentials"in h||!/^(http(s)?:)?\/\//.test(n)||(h=new XDomainRequest),"onload"in h?h.onload=h.onerror=h.ontimeout=o:h.onreadystatechange=function(n){h.readyState>3&&o(n)},h.onprogress=function(n){s.call("progress",u,n)},u={header:function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?p.get(n):(null==t?p.remove(n):p.set(n,t+""),u)},mimeType:function(n){return arguments.length?(c=null==n?null:n+"",u):c},responseType:function(n){return arguments.length?(f=n,u):f},timeout:function(n){return arguments.length?(d=+n,u):d},user:function(n){return arguments.length<1?v:(v=null==n?null:n+"",u)},password:function(n){return arguments.length<1?y:(y=null==n?null:n+"",u)},response:function(n){return l=n,u},get:function(n,t){return u.send("GET",n,t)},post:function(n,t){return u.send("POST",n,t)},send:function(t,r,e){return h.open(t,n,!0,v,y),null==c||p.has("accept")||p.set("accept",c+",*/*"),h.setRequestHeader&&p.each(function(n,t){h.setRequestHeader(t,n)}),null!=c&&h.overrideMimeType&&h.overrideMimeType(c),null!=f&&(h.responseType=f),d>0&&(h.timeout=d),null==e&&"function"==typeof r&&(e=r,r=null),null!=e&&1===e.length&&(e=i(e)),null!=e&&u.on("error",e).on("load",function(n){e(null,n)}),s.call("beforesend",u,h),h.send(null==r?null:r),u},abort:function(){return h.abort(),u},on:function(){var n=s.on.apply(s,arguments);return n===s?u:n}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return u.get(e)}return u},K=function(n,t){return function(r,e){var o=B(r).mimeType(n).response(t);if(null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return o.get(e)}return o}};K("text/html",function(n){return document.createRange().createContextualFragment(n.responseText)});var Q=K("application/json",function(n){return JSON.parse(n.responseText)});K("text/plain",function(n){return n.responseText}),K("application/xml",function(n){var t=n.responseXML;if(!t)throw new Error("parse error");return t});var V={},W={},Y=34,Z=10,nn=13,tn=function(n){function t(n,t){function r(){if(l)return W;if(f)return f=!1,V;var t,r,e=i;if(n.charCodeAt(e)===Y){for(;i++<c&&n.charCodeAt(i)!==Y||n.charCodeAt(++i)===Y;);return(t=i)>=c?l=!0:(r=n.charCodeAt(i++))===Z?f=!0:r===nn&&(f=!0,n.charCodeAt(i)===Z&&++i),n.slice(e+1,t-1).replace(/""/g,'"')}for(;i<c;){if((r=n.charCodeAt(t=i++))===Z)f=!0;else if(r===nn)f=!0,n.charCodeAt(i)===Z&&++i;else if(r!==u)continue;return n.slice(e,t)}return l=!0,n.slice(e,c)}var e,o=[],c=n.length,i=0,a=0,l=c<=0,f=!1;for(n.charCodeAt(c-1)===Z&&--c,n.charCodeAt(c-1)===nn&&--c;(e=r())!==W;){for(var s=[];e!==V&&e!==W;)s.push(e),e=r();t&&null==(s=t(s,a++))||o.push(s)}return o}function r(t){return t.map(e).join(n)}function e(n){return null==n?"":o.test(n+="")?'"'+n.replace(/"/g,'""')+'"':n}var o=new RegExp('["'+n+"\n\r]"),u=n.charCodeAt(0);return{parse:function(n,r){var e,o,u=t(n,function(n,t){if(e)return e(n,t-1);o=n,e=r?f(n,r):l(n)});return u.columns=o,u},parseRows:t,format:function(t,r){return null==r&&(r=s(t)),[r.map(e).join(n)].concat(t.map(function(t){return r.map(function(n){return e(t[n])}).join(n)})).join("\n")},formatRows:function(n){return n.map(r).join("\n")}}},rn=(tn(","),tn("\t"),"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}),en=/<%=([\s\S]+?)%>/g,on=1/0,un="[object Symbol]",cn=/[&<>"'`]/g,an=RegExp(cn.source),ln=/<%-([\s\S]+?)%>/g,fn=/<%([\s\S]+?)%>/g,sn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},pn="object"==typeof rn&&rn&&rn.Object===Object&&rn,hn="object"==typeof self&&self&&self.Object===Object&&self,vn=pn||hn||Function("return this")(),yn=function(n){return function(t){return null==n?void 0:n[t]}}(sn),dn=Object.prototype.toString,mn=vn.Symbol,gn=mn?mn.prototype:void 0,bn=gn?gn.toString:void 0,jn={escape:ln,evaluate:fn,interpolate:en,variable:"",imports:{_:{escape:function(n){return(n=y(n))&&an.test(n)?n.replace(cn,yn):n}}}},wn=1/0,_n=9007199254740991,kn="[object Arguments]",On="[object Error]",An="[object Function]",Sn="[object GeneratorFunction]",En="[object Symbol]",Tn=/\b__p \+= '';/g,$n=/\b(__p \+=) '' \+/g,xn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Cn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Rn=/^(?:0|[1-9]\d*)$/,qn=/($^)/,Ln=/['\n\r\u2028\u2029\\]/g,Fn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Mn="object"==typeof rn&&rn&&rn.Object===Object&&rn,Hn="object"==typeof self&&self&&self.Object===Object&&self,Pn=Mn||Hn||Function("return this")(),Xn=Object.prototype,Jn=Xn.hasOwnProperty,Nn=Xn.toString,Un=Pn.Symbol,Dn=Xn.propertyIsEnumerable,Gn=function(n,t){return function(r){return n(t(r))}}(Object.keys,Object),zn=Math.max,In=Un?Un.prototype:void 0,Bn=In?In.toString:void 0,Kn=Array.isArray,Qn=function(n){return S(function(t,r){var e=-1,o=r.length,u=o>1?r[o-1]:void 0,c=o>2?r[2]:void 0;for(u=n.length>3&&"function"==typeof u?(o--,u):void 0,c&&x(r[0],r[1],c)&&(u=o<3?void 0:u,o=1),t=Object(t);++e<o;){var i=r[e];i&&n(t,i,e,u)}return t})}(function(n,t,r,e){T(t,z(t),n,e)}),Vn=S(function(n,t){try{return d(n,void 0,t)}catch(n){return H(n)?n:new Error(n)}}),Wn=function(n,t,r){var e=jn.imports._.templateSettings||jn;r&&x(n,t,r)&&(t=void 0),n=D(n),t=Qn({},t,e,_);var o,u,c=Qn({},t.imports,e.imports,_),i=G(c),a=b(c,i),l=0,f=t.interpolate||qn,s="__p += '",p=RegExp((t.escape||qn).source+"|"+f.source+"|"+(f===en?Cn:qn).source+"|"+(t.evaluate||qn).source+"|$","g"),h="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";n.replace(p,function(t,r,e,c,i,a){return e||(e=c),s+=n.slice(l,a).replace(Ln,j),r&&(o=!0,s+="' +\n__e("+r+") +\n'"),i&&(u=!0,s+="';\n"+i+";\n__p += '"),e&&(s+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),l=a+t.length,t}),s+="';\n";var v=t.variable;v||(s="with (obj) {\n"+s+"\n}\n"),s=(u?s.replace(Tn,""):s).replace($n,"$1").replace(xn,"$1;"),s="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+s+"return __p\n}";var y=Vn(function(){return Function(i,h+"return "+s).apply(void 0,a)});if(y.source=s,H(y))throw y;return y};!function(){function n(){Q(u,function(r,e){r&&console.error(r),console.log(e),t(c).innerHTML=i(e),t(c+" .schnack-button").addEventListener("click",function(r){var e=t(c+" .schnack-body").value;B(u).mimeType("application/json").header("Content-Type","application/json").post(JSON.stringify(e),function(t,r){t&&console.error(t),console.log(r),n()})})})}var t=function(n){return document.querySelector(n)},r=t("script[data-schnack-target]");if(!r)return console.warn("schnack script tag needs some data attributes");var e=r.dataset,o=e.schnackSlug,u=e.schnackHost+"/comments/"+o,c=e.schnackTarget,i=Wn('<div class="schnack-form">\n    <textarea class="schnack-body"></textarea><br>\n    <button class="schnack-button">Send comment</button>\n</div>\n<ul class="schnack-comments">\n    <% comments.forEach((comment) => { %>\n        <li class="schnack-comment">\n            <div class="schnack-author">\n                <%= comment.name %> <span class="schnack-date"><%= comment.created_at_s %></span>\n            </div>\n            <blockquote class="schnack-body">\n                <p><%= comment.comment %></p>\n            </blockquote>\n        </li>\n    <% }) %>\n</ul>');n()}()}();
